## Kafka普通消费者


### 为什么使用普通消费者 

使用普通消费者最主要的原因是你想拥有比消费者组提供你的分区权限更大的权限,比如:

*  读取一个数据多次
*  一个进程消费一个订阅的分区
*  管理事务确保一个消息仅仅被消费一次 

简单消费者模型需要大量的工作这些在消费组是不想要的 

* 你必须自己控制你的应用的offsets当你关闭的消费者时
* 你必须指定你连接的是代理lead
* 你必须处理代理的leader一旦有变动

使用简单消费者的步骤

* 找到一个活动的Break然后知道那个Breaker是Leader对你当前的topic和分区  
* 决定那个复制代理是你的topic和分区 
* 建立那些请求是你感兴趣的
* 获取数据
* 当leader变化了的时候你必须恢复和定义 

寻找一个topic和分区的Leader代理   

最见得方式是你传一个已经知道的代理到你的业务,通过properties文件或者命令行,他不需要是整个集群只需要一台机器的代理这样你就可以知道Leader的信息 


